################  Wireguard conf  #################
# After installing wireguard on client and server

## On server
# copy conf given and generate public / private key

# On your iptables configuration add this lines

---
# Wg rules
iptables -A FORWARD -i wg0 -j ACCEPT
iptables -A FORWARD -o wg0 -j ACCEPT
iptables -t nat -A POSTROUTING -o <main-interface> -j MASQUERADE
---

# Power on interface
sudo wg-quick up wg0

# List peer
sudo wg show

## On client
# Copy cont given and generate public / private key

# On your iptable configuration add this lines

---
# Wg rules
iptables -A INPUT -i $INTERFACE -p tcp --dport 51820 -m state --state ESTABLISHED -s <Server-IPv4>/32 -j ACCEPT
iptables -A OUTPUT -o $INTERFACE -p tcp --sport 51820 -m state --state NEW,ESTABLISHED -d <Server-IPv4>/32 -j ACCEPT
---

# Power on interface
sudo wg-quick up wg0

# List peer
sudo wg show

## On server if you want to add more peer
sudo wg set wg0 peer <CLIENT_PUB_KEY> allowed-ips <CLIENT_VPN_IP>/32

# If you want to route all traffic please aftive ipv4 forwarding on server and client
sudo vi /etc/sysctl.conf

- #net.ipv4.ip_forward=1
+ net.ipv4.ip_forward=1

# Active wireguard interface at boot
sudo systemctl enable wg-quick@wg0
