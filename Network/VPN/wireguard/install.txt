#######################  WIRE GUARD  #####################

# Add repository link to apt.source.list
sudo sh -c 'echo "deb http://deb.debian.org/debian/ unstable main" > /etc/apt/sources.list.d/unstable-wireguard.list'
sudo sh -c "printf 'Package: *\nPin: release a=unstable\nPin-Priority: 150\n' > /etc/apt/preferences.d/limit-unstable"

# Update repository and install package
sudo apt update
sudo apt install wireguard-dkms wireguard-tools

# Add interface with ip
sudo ip link add dev wg0 type wireguard

# On server set ipv4 VPN address for host and peer
sudo ip address add dev wg0 192.168.2.1 peer 192.168.2.2

# Generate private key on server
umask 077
wg genkey > privatekey

# Generate public key
wg pubkey < privatekey > publickey
